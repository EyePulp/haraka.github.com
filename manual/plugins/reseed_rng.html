<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Haraka Manual &raquo; reseed_rng plugin</title>
        <link rel="stylesheet" type="text/css" href="/reset.css">
        <link rel="stylesheet" type="text/css" href="/chapter.css">
        <link rel="stylesheet" type="text/css" href="/sh_emacs.css">
        <script type="text/javascript" src="/sh_main.min.js"></script>
        <script type="text/javascript" src="/sh_javascript.min.js"></script>
        <script type="text/javascript">
        window.onload = function () {
            var pres = document.getElementsByTagName("pre"),
                text;

            for (var i = 0; i < pres.length; ++i) {
                text = pres[i].innerText || "";

                if (!(/^\s*\$/).test(text)) {
                    pres[i].className = "sh_javascript";
                }
            }

            sh_highlightDocument();
        }
        </script>
    </head>
    <body>
        <div id="content">
            <h1>reseed_rng</h1>

<p>The V8 that ships with node 0.4.x uses an unsophisticated method of
seeding its random number generator- it simply uses the current time
in ms.  Worse, that version of V8 (at least) doesn't provide a way
to explicitly reseed the RNG.</p>

<p>In situations where multiple processes can spawn in the same
ms, processes can be seeded with the same value, leading to bad 
problems like UUID collisions. When using the 'cluster' module, it's
quite easy to observe this behavior. </p>

<p>This plugin uses David Bao's reseed.js (see http://davidbau.com/archives/2010/01/30/random<em>seeds</em>coded<em>hints</em>and<em>quintillions.html)
to provide a reseedable Math.random(), and hooks the init</em>child event
to reseed the RNG with a sligtly better seed at spawned-process startup
time. </p>

<p>All users of the 'cluster' module should consider using this plugin.</p>

        </div>
    </body>
</html>
