<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Haraka Manual &raquo; lookup_rdns.strict plugin</title>
        <link rel="stylesheet" type="text/css" href="/reset.css">
        <link rel="stylesheet" type="text/css" href="/chapter.css">
        <link rel="stylesheet" type="text/css" href="/sh_emacs.css">
        <script type="text/javascript" src="/sh_main.min.js"></script>
        <script type="text/javascript" src="/sh_javascript.min.js"></script>
        <script type="text/javascript">
        window.onload = function () {
            var pres = document.getElementsByTagName("pre"),
                text;

            for (var i = 0; i < pres.length; ++i) {
                text = pres[i].innerText || "";

                if (!(/^\s*\$/).test(text)) {
                    pres[i].className = "sh_javascript";
                }
            }

            sh_highlightDocument();
        }
        </script>
    </head>
    <body>
        <div id="content">
            <h1>lookup_rdns.strict</h1>

<p>This plugin checks the reverse-DNS and compares the resulting addresses
against forward DNS for a match.  If there is no match it sends a
DENYDISCONNECT, otherwise if it matches it sends an OK.  DENYDISCONNECT
messages are configurable.</p>

<h2>Configuration lookup_rdns.strict.ini</h2>

<p>This is the general configuration file for the plugin.  In it you can find
ways to customize user messages, specify timeouts, and some whitelist
parsing options.</p>

<ul>
<li><p>lookup_rdns.strict.general.nomatch</p>

<p>Text to send the user if there is no reverse to forward match (text).</p></li>
<li><p>lookup_rdns.strict.general.timeout</p>

<p>How long we should give this plugin before we time it out (seconds).</p></li>
<li><p>lookup<em>rdns.strict.general.timeout</em>msg</p>

<p>Text to send when plugin reaches timeout (text).</p></li>
<li><p>lookup_rdns.strict.forward.nxdomain</p>

<p>Text to send the user if there is no forward match (text).</p></li>
<li><p>lookup_rdns.strict.forward.dnserror</p>

<p>Text to send the user if there is some other error with the forward
lookup (text).</p></li>
<li><p>lookup_rdns.strict.reverse.nxdomain</p>

<p>Text to send the user if there is no reverse match (text).</p></li>
<li><p>lookup_rdns.strict.reverse.dnserror</p>

<p>Text to send the user if there is some other error with the reverse
lookup (text).</p></li>
</ul>

<h2>Configuration lookup_rdns.strict.timeout</h2>

<p>This is how we specify to Haraka that our plugin should have a certain timeout.
If you specify 0 here, then the plugin will never timeout while the connection
is active.  This is also required for this plugin, which needs to handle its
own timeouts.  To actually specify the timeout for this plugin, please see
the general config in lookup_rdns.strict.ini.</p>

<h2>Configuration lookup_rdns.strict.whitelist</h2>

<p>No matter how much you believe in checking that DNS and rDNS match, it is not
required by RFC, and there will always be some legitimate mail server that
has great trouble getting their DNS in order.  For this reason we are
providing a whitelist.</p>

<p>This file will match exactly what you put on each line.</p>

<h2>Configuration lookup<em>rdns.strict.whitelist</em>regex</h2>

<p>Does the same thing as the whitelist file, but each line is a regex.
Each line is also anchored for you, meaning '^' + regex + '$' is added for
you.  If you need to get around this restriction, you may use a '.*' at
either the start or the end of your regex.  This should help prevent people
from writing overly permissive rules on accident.</p>

        </div>
    </body>
</html>
