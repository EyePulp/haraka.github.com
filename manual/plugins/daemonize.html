<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Haraka Manual &raquo; daemonize plugin</title>
        <link rel="stylesheet" type="text/css" href="/reset.css">
        <link rel="stylesheet" type="text/css" href="/chapter.css">
        <link rel="stylesheet" type="text/css" href="/sh_emacs.css">
        <script type="text/javascript" src="/sh_main.min.js"></script>
        <script type="text/javascript" src="/sh_javascript.min.js"></script>
        <script type="text/javascript">
        window.onload = function () {
            var pres = document.getElementsByTagName("pre"),
                text;

            for (var i = 0; i < pres.length; ++i) {
                text = pres[i].innerText || "";

                if (!(/^\s*\$/).test(text)) {
                    pres[i].className = "sh_javascript";
                }
            }

            sh_highlightDocument();
        }
        </script>
    </head>
    <body>
        <div id="content">
            <h1>daemonize</h1>

<p>To use this plugin you have to install the 'daemon' module by running 
'npm install daemon' in your Haraka configuration directory. <br />
If daemon is not found then the plugin will log a notice and Haraka will 
continue running in the foreground.</p>

<p>This plugin should be listed at the top of your config/plugins file so that 
Haraka goes into the background before any other plugins are run.</p>

<h2>Configuration</h2>

<p>This plugin looks for daemonize.ini in your configuration directory and the 
following options can be set:</p>

<ul>
<li><p>log_file  (default: /var/log/haraka.log)</p>

<p>The file that STDOUT should be redirected to.  It is recommended that 
you use this plugin with the log.syslog plugin instead.</p></li>
<li><p>pid_file  (default: /var/run/haraka.pid)</p>

<p>File where the master process PID should be written to.  If this file 
cannot be locked then start-up will fail.</p></li>
</ul>

<h2>Init-Script</h2>

<p>A RedHat/CentOS compatible init-script is provided for use with this module 
which can be found in the plugins directory called haraka.init. <br />
It should be copied to /etc/init.d/haraka and registered with 
'chkconfig --add haraka' to activate haraka at system boot.</p>

<p>The init-script presumes that Haraka is installed as /usr/local/bin/haraka 
and main configuration file is /etc/haraka/config/smtp.ini. <br />
If this is not the case on your system, then you should create the file 
/etc/sysconfig/haraka which accepts the following configuration:</p>

<ul>
<li><p>exec  (default: exec=/usr/local/bin/haraka)</p>

<p>The path to Haraka script</p></li>
<li><p>config  (default: config=/etc/haraka/config/smtp.ini)</p>

<p>The path to the Haraka smtp.ini configuration script</p></li>
<li><p>max<em>open</em>files  (default: 65535)</p>

<p>The maximum number of open files allowed per process.  If you are 
running Haraka using the 'cluster' module, then this is the per-child 
limit.</p></li>
</ul>

        </div>
    </body>
</html>
