<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Haraka Manual &raquo; Connection Object</title>
        <link rel="stylesheet" type="text/css" href="/reset.css">
        <link rel="stylesheet" type="text/css" href="/chapter.css">
        <link rel="stylesheet" type="text/css" href="/sh_emacs.css">
        <script type="text/javascript" src="/sh_main.min.js"></script>
        <script type="text/javascript" src="/sh_javascript.min.js"></script>
        <script type="text/javascript">
        window.onload = function () {
            var pres = document.getElementsByTagName("pre"),
                text;

            for (var i = 0; i < pres.length; ++i) {
                text = pres[i].innerText || "";

                if (!(/^\s*\$/).test(text)) {
                    pres[i].className = "sh_javascript";
                }
            }

            sh_highlightDocument();
        }
        </script>
    </head>
    <body>
        <div id="content">
            <h1>Connection Object</h1>

<p>For each connection to Haraka there is one connection object.</p>

<h2>API</h2>

<ul>
<li>connection.uuid</li>
</ul>

<p>A unique UUID for this connection.</p>

<ul>
<li>connection.remote_ip</li>
</ul>

<p>The remote IP address</p>

<ul>
<li>connection.remote_host</li>
</ul>

<p>The rDNS of the remote IP</p>

<ul>
<li>connection.local_ip</li>
</ul>

<p>The bound IP address of the server as reported by the OS</p>

<ul>
<li>connection.local_port</li>
</ul>

<p>The bound port number of the server which is handling the connection.
If you have specified multiple listen= ports this variable is useful
if you only want a plugin to run when connections are made to a specific
port</p>

<ul>
<li>connection.greeting</li>
</ul>

<p>Either 'EHLO' or 'HELO' whichever the remote end used</p>

<ul>
<li>connection.hello_host</li>
</ul>

<p>The hostname given to HELO or EHLO</p>

<ul>
<li>connection.notes</li>
</ul>

<p>A safe object in which you can store connection-specific variables</p>

<ul>
<li>connection.transaction</li>
</ul>

<p>The current transaction object, valid after MAIL FROM, and destroyed at queue
time, RSET time, or if MAIL FROM was rejected. See the Transaction Object
documentation file.</p>

<ul>
<li>connection.relaying</li>
</ul>

<p>A boolean flag to say whether this connection is allowed to relay mails (i.e.
deliver mails outbound). This is normally set by SMTP AUTH, or sometimes via
an IP address check.</p>

<ul>
<li>connection.current_line</li>
</ul>

<p>For low level use. Contains the current line sent from the remote end,
verbatim as it was sent. Can be useful in certain botnet detection techniques.</p>

<ul>
<li>connection.last_response</li>
</ul>

<p>Contains the last SMTP response sent to the client.</p>

<ul>
<li>connection.remote_close</li>
</ul>

<p>For low level use.  This value is set when the remote host drops the connection.</p>

        </div>
    </body>
</html>
